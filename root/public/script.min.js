// Script Minified for Site Performance.
document.addEventListener("DOMContentLoaded",()=>{let e=document.getElementById("greeting"),t=document.getElementById("links"),n=document.getElementById("searchInput"),l=document.getElementById("searchButton"),a=document.getElementById("clock"),s=document.getElementById("settings-sidebar"),o=document.getElementById("settings-toggle"),r=document.getElementById("theme"),i=document.getElementById("searchEngine"),c=document.getElementById("applySettings"),g=document.getElementById("searchPlaceholder"),h=document.getElementById("searchButtonText"),d=document.getElementById("logoUrl"),m=document.getElementById("logo"),u=document.getElementById("add-link-header"),E=document.getElementById("logoAboveSearchDiv"),p;function v(){if(p){if(e&&(e.textContent=p.greeting),t){t.innerHTML="",p.links.forEach(e=>{let n=document.createElement("a");n.href=e.url;let l="";if(e.icon&&e.icon.startsWith("m:")){let a=e.icon.substring(2);l=`<i class="material-icons">${a}</i>`}else if(e.icon&&e.icon.startsWith("l:")){let s=e.icon.substring(2);l=`<img src="${s}" alt="Link Icon" class="link-icon">`}else l='<i class="material-icons">link</i>';n.innerHTML=`${l} ${e.name}`,t.appendChild(n)});let a=document.createElement("button");a.id="add-link",a.innerHTML='<i class="material-icons">add</i>',t.appendChild(a),a.addEventListener("click",()=>{let e=prompt("Enter link name:"),t=prompt("Enter link URL:"),n=prompt("Enter link icon (m:material or l:url):");e&&t&&(p.links.push({name:e,url:t,icon:n||"m:link"}),v(),y())})}1===p.theme?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode"),n&&(n.placeholder=p.searchPlaceholder),l&&(l.textContent=p.searchButtonText),m&&(m.src=p.logoUrl),r&&(r.value=p.theme),i&&(i.value=p.searchEngine),g&&(g.value=p.searchPlaceholder),h&&(h.value=p.searchButtonText),d&&(d.value=p.logoUrl),d&&d.addEventListener("input",()=>{let e=d.value;e?E&&(E.innerHTML=`<img src="${e}" alt="Logo Preview" class="logo-preview">`):E&&(E.innerHTML="")})}}function k(){let e=new URLSearchParams(window.location.search),t=e.get("t"),n=e.get("se"),l=e.get("sp"),a=e.get("bt"),s=e.get("l");if(null!==t&&!isNaN(t)){let o=parseInt(t,10);(0===o||1===o)&&(p.theme=o)}if(null!==n&&!isNaN(n)){let r=parseInt(n,10);r>=0&&r<p.searchEngines.length&&(p.searchEngine=r)}null!==l&&(p.searchPlaceholder=l),null!==a&&(p.searchButtonText=a),null!==s&&(p.logoUrl=s),v()}function B(){let e=new Date,t=e.getHours(),n=e.getMinutes(),l=t>=12?"PM":"AM";t%=12,t=t||12;let s=`${t}:${n.toString().padStart(2,"0")} ${l}`;a&&(a.textContent=s)}function y(){if(!p)return;let e=new URL(window.location.href);e.searchParams.set("t",p.theme),e.searchParams.set("se",p.searchEngine),e.searchParams.set("sp",p.searchPlaceholder),e.searchParams.set("bt",p.searchButtonText),e.searchParams.set("l",p.logoUrl),window.history.replaceState({},"",e)}fetch("config.json").then(e=>{if(!e.ok)throw Error("Failed to load config.json");return e.json()}).then(e=>{p=e,v()}).catch(e=>{console.error("Error loading config.json:",e),p={greeting:"Welcome!",links:[{name:"Google",url:"https://www.google.com",icon:"m:search"},{name:"GitHub",url:"https://github.com",icon:"l:https://github.githubassets.com/favicons/favicon-dark.png"},{name:"Youtube",url:"https://www.youtube.com",icon:"l:https://www.youtube.com/s/desktop/ee47b5e0/img/logos/favicon.ico"}],searchEngines:["https://www.google.com/search?q=","https://www.bing.com/search?q=","https://duckduckgo.com/?q=","https://yandex.com/search/?text="],theme:0,searchEngine:0,searchPlaceholder:"Search...",searchButtonText:"Go",logoUrl:"/img/logo.png"},v()}),k(),l&&l.addEventListener("click",()=>{let e=n.value;e&&(window.location.href=p.searchEngines[p.searchEngine]+encodeURIComponent(e))}),B(),setInterval(B,1e3),s&&s.classList.remove("open"),o&&o.addEventListener("click",()=>{s&&s.classList.toggle("open")}),document.addEventListener("click",e=>{s&&!s.contains(e.target)&&e.target!==o&&e.target!==u&&s&&s.classList.remove("open")}),c&&c.addEventListener("click",()=>{p&&(p.theme=parseInt(r.value,10),p.searchEngine=parseInt(i.value,10),p.searchPlaceholder=g.value,p.searchButtonText=h.value,p.logoUrl=d.value,v(),s&&s.classList.remove("open"),y())})});
